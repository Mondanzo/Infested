[gd_scene load_steps=13 format=3 uid="uid://b6nam1vu1ot4x"]

[ext_resource type="PackedScene" uid="uid://bq5lhq2eljq4w" path="res://Assets/Models/soul_fragments/soul_fragment.glb" id="1_gljds"]
[ext_resource type="Script" path="res://Scripts/Collectible.gd" id="2_vblma"]
[ext_resource type="Material" uid="uid://c4sgw2dxaj7uh" path="res://Assets/Particles/Collectible.tres" id="3_0rt45"]
[ext_resource type="AudioStream" uid="uid://byytkthfdaxwt" path="res://Assets/Audio/Sounds/Collectibles/s_plop.wav" id="4_cm8la"]

[sub_resource type="Animation" id="Animation_frndm"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cube003:blend_shapes/Key 1")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_chuu1"]
resource_name = "open-close"
length = 5.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Cube003:blend_shapes/Key 1")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 2.5, 5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 1.0, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_75rci"]
_data = {
"RESET": SubResource("Animation_frndm"),
"open-close": SubResource("Animation_chuu1")
}

[sub_resource type="BoxShape3D" id="BoxShape3D_lmrbl"]
size = Vector3(1.6198, 1.3068, 1.46971)

[sub_resource type="Animation" id="Animation_p4gro"]
resource_name = "destroy"
length = 5.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../Cube003:transparency")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 2),
"update": 0,
"values": [0.0, 1.0]
}
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("..")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(5),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"queue_free"
}]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("../AudioStreamPlayer3D:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_5pa8d"]
_data = {
"destroy": SubResource("Animation_p4gro")
}

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gd2uu"]
transparency = 4
blend_mode = 1
shading_mode = 0
diffuse_mode = 3
specular_mode = 2
albedo_color = Color(0.717647, 0.309804, 0.717647, 0.741176)
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="SphereMesh" id="SphereMesh_ya3jh"]
material = SubResource("StandardMaterial3D_gd2uu")
radius = 0.05
height = 0.1
radial_segments = 4
rings = 10

[node name="soul_fragment" instance=ExtResource("1_gljds")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="1"]
autoplay = "open-close"
libraries = {
"": SubResource("AnimationLibrary_75rci")
}

[node name="OmniLight3D" type="OmniLight3D" parent="." index="2"]
light_color = Color(0.972549, 0.580392, 0.988235, 1)
light_energy = 2.455
light_size = 0.238
shadow_enabled = true

[node name="CollectibleZone" type="Area3D" parent="." index="3"]
collision_layer = 0
collision_mask = 8
script = ExtResource("2_vblma")
soul_fragments = 10

[node name="CollisionShape3D" type="CollisionShape3D" parent="CollectibleZone" index="0"]
shape = SubResource("BoxShape3D_lmrbl")

[node name="AnimationPlayer" type="AnimationPlayer" parent="CollectibleZone" index="1"]
libraries = {
"": SubResource("AnimationLibrary_5pa8d")
}

[node name="GPUParticles3D" type="GPUParticles3D" parent="CollectibleZone" index="2"]
emitting = false
amount = 2048
lifetime = 5.0
visibility_aabb = AABB(-0.389135, -0.715808, -0.48135, 0.77827, 1.43162, 0.9627)
process_material = ExtResource("3_0rt45")
draw_pass_1 = SubResource("SphereMesh_ya3jh")

[node name="GPUParticlesAttractorSphere3D" type="GPUParticlesAttractorSphere3D" parent="CollectibleZone/GPUParticles3D" index="0"]
attenuation = -0.965936

[node name="GPUParticlesAttractorSphere3D2" type="GPUParticlesAttractorSphere3D" parent="CollectibleZone/GPUParticles3D" index="1"]
strength = -1.0
attenuation = -0.965936
radius = 0.180081

[node name="DebugShape" type="Marker3D" parent="CollectibleZone" index="3"]

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="." index="4"]
stream = ExtResource("4_cm8la")
volume_db = -10.0
bus = &"SFX"

[connection signal="body_entered" from="CollectibleZone" to="CollectibleZone" method="on_body_entered"]
